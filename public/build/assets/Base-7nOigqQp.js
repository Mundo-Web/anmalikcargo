import{j as e}from"./AboutHeader-CpM0iYLI.js";import{r as m}from"./index-B80Lgev0.js";import{G as h}from"./CreateReactScript-CDfQEbdT.js";import{i as b}from"./tippy-react.esm-CHhA99mn.js";/* empty css              */import{L as g}from"./Logout-CPQZ59pt.js";import{a as B}from"./index.esm-Cu-mVv1q.js";import{m as p}from"./main-B2CtU6ez.js";import"./WhatsAppModal-CjZ0YwJN.js";import{S as R}from"./sweetalert2.all-Dh0rZL5X.js";const M=()=>{const s=new Date().getFullYear();return e.jsx("footer",{className:"footer",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[s," Â© ",h.APP_NAME," | Desarrollado por ",e.jsx("a",{href:"//mundoweb.pe",target:"_blank",children:"Mundo Web"})]}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"text-md-end footer-links d-none d-sm-block",children:[e.jsx("a",{href:"//mundoweb.pe",target:"_blank",children:"Sobre nosotros"}),e.jsx("a",{href:"//mundoweb.pe",target:"_blank",children:"Contactanos"})]})})]})})})},c=({href:s,icon:a,children:i})=>e.jsx("li",{className:location.pathname.startsWith(s)?"menuitem-active":"",children:e.jsxs(B,{href:s,className:location.pathname.startsWith(s)?"active":"",children:[e.jsx("i",{className:a}),e.jsxs("span",{children:[" ",i," "]})]})}),y=({title:s,icon:a,children:i})=>{var d;const r=[];Array.isArray(i)?i.forEach(t=>{var x;return r.push((x=t==null?void 0:t.props)==null?void 0:x.href)}):r.push((d=i==null?void 0:i.props)==null?void 0:d.href);const n=r.filter(Boolean).some(t=>location.pathname.includes(t)),o=`item-${crypto.randomUUID()}`;return e.jsxs("li",{children:[e.jsxs("a",{href:`#${o}`,"data-bs-toggle":"collapse","aria-expanded":n,children:[e.jsx("i",{className:a}),e.jsxs("span",{children:[" ",s," "]}),e.jsx("span",{className:"menu-arrow"})]}),e.jsx("div",{className:`collapse ${n&&"show"}`,id:o,children:e.jsx("ul",{className:"nav-second-level",children:i})})]})},S=({session:s,hasRole:a,salesCount:i})=>{const r=s.roles[0];return e.jsx("div",{className:"left-side-menu",style:{background:"#6745BA"},children:e.jsxs("div",{className:"h-100","data-simplebar":!0,children:[e.jsxs("div",{className:"user-box text-center",children:[e.jsx("img",{src:`/api/admin/profile/thumbnail/${s.relative_id}?v=${new Date(s.updated_at).getTime()}`,alt:s.name,title:s.name,className:"rounded-circle img-thumbnail avatar-md",style:{backgroundColor:"unset",borderColor:"#98a6ad",objectFit:"cover",objectPosition:"center"},onError:n=>n.target.src=`https://ui-avatars.com/api/?name=${s.name}+${s.lastname}&color=7F9CF5&background=EBF4FF`}),e.jsxs("div",{className:"dropdown",children:[e.jsxs("a",{href:"#",className:"user-name dropdown-toggle h5 mt-2 mb-1 d-block","data-bs-toggle":"dropdown","aria-expanded":"false",children:[s.name.split(" ")[0]," ",s.lastname.split(" ")[0]]}),e.jsxs("div",{className:"dropdown-menu user-pro-dropdown",children:[e.jsxs("a",{href:"/profile",className:"dropdown-item notify-item",children:[e.jsx("i",{className:"fe-user me-1"}),e.jsx("span",{children:"Mi perfil"})]}),e.jsxs("a",{href:"/account",className:"dropdown-item notify-item",children:[e.jsx("i",{className:"mdi mdi-account-key-outline me-1"}),e.jsx("span",{children:"Mi cuenta"})]}),e.jsxs("a",{href:"#",className:"dropdown-item notify-item right-bar-toggle dropdown notification-list",children:[e.jsx("i",{className:"fe-settings me-1"}),e.jsx("span",{children:"Configuracion"})]}),e.jsxs("a",{href:"#",className:"dropdown-item notify-item",onClick:g,children:[e.jsx("i",{className:"fe-log-out me-1"}),e.jsx("span",{children:"Cerrar sesion"})]})]})]}),e.jsx("p",{className:"text-muted left-user-info",children:r.name}),e.jsxs("ul",{className:"list-inline",children:[e.jsx("li",{className:"list-inline-item",children:e.jsx(b,{content:"Configuracion",children:e.jsx("a",{href:"#",className:"text-muted left-user-info right-bar-toggle dropdown notification-list",children:e.jsx("i",{className:"mdi mdi-cog"})})})}),e.jsx("li",{className:"list-inline-item",children:e.jsx(b,{content:"Cerrar sesion",children:e.jsx("a",{href:"#",className:"text-danger",onClick:g,children:e.jsx("i",{className:"mdi mdi-power"})})})})]})]}),e.jsx("div",{id:"sidebar-menu",className:"show",children:e.jsxs("ul",{id:"side-menu",children:[e.jsx("li",{className:"menu-title",children:"Navigation Panel"}),a("Admin")&&e.jsxs(e.Fragment,{children:[e.jsx(c,{href:"/admin/home",icon:"mdi mdi-home",children:"Dashboard"}),e.jsxs(c,{href:"/admin/sales",icon:"mdi mdi-cart-outline",children:[e.jsx("span",{className:"badge bg-primary float-end",children:i}),"Pedidos"]}),e.jsxs(y,{title:"Inventario",icon:"mdi mdi-cube",children:[e.jsx(c,{href:"/admin/categories",icon:"mdi mdi-clipboard-list-outline",children:"Categorias"}),e.jsx(c,{href:"/admin/items",icon:"mdi mdi-cube-send",children:"Items"}),e.jsx(c,{href:"/admin/colors",icon:"mdi mdi-palette-outline",children:"Colores"}),e.jsx(c,{href:"/admin/sizes",icon:"mdi mdi-ruler",children:"Tallas"})]}),e.jsx(y,{title:"Ventas",icon:"mdi mdi-cash-register",children:e.jsx(c,{href:"/admin/coupons",icon:"mdi mdi-ticket-percent",children:"Cupones"})}),e.jsx("li",{className:"menu-title",children:"Landing Page"}),e.jsx(c,{href:"/admin/subscriptions",icon:"mdi mdi-email-multiple",children:"Subscripciones"}),e.jsx(c,{href:"/admin/ads",icon:"mdi mdi-google-ads",children:"Pop-ups"}),e.jsx(c,{href:"/admin/sliders",icon:"mdi mdi-page-layout-body",children:"Sliders"}),e.jsx(c,{href:"/admin/about",icon:"mdi mdi-briefcase",children:"Nosotros"}),e.jsx(c,{href:"/admin/testimonies",icon:"mdi mdi-forum",children:"Testimonios"}),e.jsx(c,{href:"/admin/faqs",icon:"mdi mdi-frequently-asked-questions",children:"FAQs"}),e.jsx(c,{href:"/admin/socials",icon:"mdi mdi-web",children:"Redes Sociales"}),e.jsx("li",{className:"menu-title",children:"Configuraciones"}),e.jsx(c,{href:"/admin/users",icon:"mdi mdi-account-multiple",children:"Usuarios"}),e.jsx(c,{href:"/admin/generals",icon:"mdi mdi-credit-card-settings",children:"Datos Generales"}),e.jsx(c,{href:"/admin/profile",icon:"mdi mdi-account-box",children:"Mi perfil"}),e.jsx(c,{href:"/admin/account",icon:"mdi mdi-account-key",children:"Mi cuenta"})]})]})}),e.jsx("div",{className:"clearfix"})]})})},_={verifying:{icon:"fa fa-spinner fa-spin",text:"Verificando sesion...",color:"secondary"},qr:{icon:"mdi mdi-qrcode-scan",text:"Escanea el QR",color:"danger"},loading_screen:{icon:"fa fa-spinner fa-spin",text:"Cargando...",color:"secondary"},authenticated:{icon:"fa fa-check",text:"Sesion activa",color:"primary"},ready:{icon:"fa fa-check",text:"Sesion activa y lista",color:"success"},close:{icon:"fa fa-warning",text:"Sesion cerrada",color:"danger"}},T=({session:s={},title:a="Pagina",whatsappStatus:i})=>(m.useEffect(()=>{document.title=`${a} | ${h.APP_NAME}`},[null]),e.jsxs("div",{className:"navbar-custom",children:[e.jsxs("ul",{className:"list-unstyled topnav-menu float-end mb-0",children:[e.jsxs("li",{className:"dropdown notification-list topbar-dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle nav-user me-0 waves-effect waves-light","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"false","aria-expanded":"false",children:[e.jsx("img",{src:`/api/admin/profile/thumbnail/${s.relative_id}?v=${crypto.randomUUID()}`,alt:"user-image",className:"rounded-circle",style:{objectFit:"cover",objectPosition:"center"},onError:r=>r.target.src=`https://ui-avatars.com/api/?name=${s.name}+${s.lastname}&color=7F9CF5&background=EBF4FF`}),e.jsxs("span",{className:"pro-user-name ms-1",children:[s.name.split(" ")[0]," ",s.lastname.split(" ")[0],e.jsx("i",{className:"mdi mdi-chevron-down"})]})]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end profile-dropdown ",children:[e.jsx("div",{className:"dropdown-header noti-title",children:e.jsx("h6",{className:"text-overflow m-0",children:"Bienvenido !"})}),e.jsxs("a",{href:"/profile",className:"dropdown-item notify-item",children:[e.jsx("i",{className:"fe-user"}),e.jsx("span",{children:"Mi perfil"})]}),e.jsxs("a",{href:"/account",className:"dropdown-item notify-item",children:[e.jsx("i",{className:"mdi mdi-account-key-outline"}),e.jsx("span",{children:"Mi cuenta"})]}),e.jsxs("a",{href:"#",className:"dropdown-item notify-item right-bar-toggle dropdown notification-list",children:[e.jsx("i",{className:"fe-lock"}),e.jsx("span",{children:"Configuracion"})]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("a",{href:"#",className:"dropdown-item notify-item",onClick:g,children:[e.jsx("i",{className:"fe-log-out"}),e.jsx("span",{children:"Cerrar sesion"})]})]})]}),e.jsx("li",{className:"dropdown notification-list",children:e.jsx("a",{href:"#",className:"nav-link right-bar-toggle waves-effect waves-light",children:e.jsx("i",{className:"fe-settings noti-icon"})})})]}),e.jsxs("div",{className:"logo-box",style:{background:"#6745BA"},children:[e.jsxs("a",{href:"/home",className:"logo logo-light text-center",children:[e.jsx("span",{className:"logo-sm",children:e.jsx("img",{src:"/assets/img/favicon.png",alt:"",height:"22"})}),e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:"/assets/img/logo.png",alt:"",height:"36"})})]}),e.jsxs("a",{href:"/home",className:"logo logo-dark text-center",children:[e.jsx("span",{className:"logo-sm",children:e.jsx("img",{src:"/assets/img/favicon.png",alt:"",height:"22"})}),e.jsx("span",{className:"logo-lg",children:e.jsx("img",{src:"/assets/img/logo.png",alt:"",height:"16"})})]})]}),e.jsxs("ul",{className:"list-unstyled topnav-menu topnav-menu-left mb-0",children:[e.jsx("li",{children:e.jsx("button",{className:"button-menu-mobile disable-btn waves-effect",children:e.jsx("i",{className:"fe-menu"})})}),e.jsx("li",{children:e.jsx("h4",{className:"page-title-main",children:a})})]}),e.jsx("div",{className:"clearfix"})]})),L=()=>{const s=p.Local.get("adminto_settings")??{menuColor:"gradient"},a=document.getElementById("bs-default-stylesheet"),i=document.getElementById("bs-dark-stylesheet"),r=document.getElementById("app-default-stylesheet"),n=document.getElementById("app-dark-stylesheet"),o=document.getElementById("dg-default-stylesheet"),d=document.getElementById("dg-dark-stylesheet");s.theme=="dark"?(i.disabled=!1,n.disabled=!1,d.disabled=!1,a.disabled=!0,r.disabled=!0,o.disabled=!0):(a.disabled=!1,r.disabled=!1,o.disabled=!1,i.disabled=!0,n.disabled=!0,d.disabled=!0);const t=document.body;return t.setAttribute("data-layout-width",s.width??"fluid"),t.setAttribute("data-layout-menu-position",s.menuPosition??"fixed"),t.setAttribute("data-sidebar-color",s.menuColor??"light"),t.setAttribute("data-sidebar-showuser",s.userInfo??!0),t.setAttribute("data-sidebar-size",s.menuSize??"default"),t.setAttribute("data-topbar-color",s.navbarColor??"light"),e.jsx("div",{className:"right-bar",children:e.jsxs("div",{"data-simplebar":!0,className:"h-100",children:[e.jsxs("div",{className:"rightbar-title",children:[e.jsx("a",{href:"#",className:"right-bar-toggle float-end",children:e.jsx("i",{className:"mdi mdi-close"})}),e.jsx("h4",{className:"font-16 m-0 text-white",children:"Configurar tema"})]}),e.jsx("div",{className:"tab-content pt-0",children:e.jsx("div",{className:"tab-pane active",id:"settings-tab",role:"tabpanel",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"alert alert-warning",role:"alert",children:[e.jsx("strong",{children:"Modifica "})," el tema, el menu, la barra superior, etc."]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Tema principal"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"color-scheme-mode",id:"light-mode-check",defaultChecked:s.theme=="dark"}),e.jsx("label",{className:"form-check-label",htmlFor:"light-mode-check",children:s.theme=="dark"?"Modo oscuro":"Modo claro"})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Ancho de la ventana"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"width",id:"fluid-check",defaultChecked:s.width=="boxed"}),e.jsx("label",{className:"form-check-label",htmlFor:"fluid-check",children:s.width=="boxed"?"Encuadrado":"Completo"})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Posicion del menu y el nabvar"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"menus-position",id:"fixed-check",defaultChecked:s.menuPosition=="scrollable"}),e.jsx("label",{className:"form-check-label",htmlFor:"fixed-check",children:s.menuPosition=="scrollable"?"Posision dinamica":"Posicion fija"})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color del menu"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"light",id:"light-check",defaultChecked:!s.menuColor||s.menuColor=="light"}),e.jsx("label",{className:"form-check-label",htmlFor:"light-check",children:"Claro"})]}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"dark",id:"dark-check",defaultChecked:s.menuColor=="dark"}),e.jsx("label",{className:"form-check-label",htmlFor:"dark-check",children:"Oscuro"})]}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"brand",id:"brand-check",defaultChecked:s.menuColor=="brand"}),e.jsx("label",{className:"form-check-label",htmlFor:"brand-check",children:"Brand"})]}),e.jsxs("div",{className:"form-check form-switch mb-3",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-color",value:"gradient",id:"gradient-check",defaultChecked:s.menuColor=="gradient"}),e.jsx("label",{className:"form-check-label",htmlFor:"gradient-check",children:"Gradiente"})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Medida del menu"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"default",id:"default-size-check",defaultChecked:!s.menuSize||s.menuSize=="default"}),e.jsx("label",{className:"form-check-label",htmlFor:"default-size-check",children:"Por defecto"})]}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"condensed",id:"condensed-check",defaultChecked:s.menuSize=="condensed"}),e.jsxs("label",{className:"form-check-label",htmlFor:"condensed-check",children:["Condensado ",e.jsx("small",{children:"(TamaÃ±o extra pequeÃ±o)"})]})]}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"radio",className:"form-check-input",name:"leftsidebar-size",value:"compact",id:"compact-check",defaultChecked:s.menuSize=="compact"}),e.jsxs("label",{className:"form-check-label",htmlFor:"compact-check",children:["Compacto ",e.jsx("small",{children:"(TamaÃ±o pequeÃ±o)"})]})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Informacion del Usuario (Menu)"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"leftsidebar-user",value:"fixed",id:"sidebaruser-check",defaultChecked:s.userInfo!=!1}),e.jsx("label",{className:"form-check-label",htmlFor:"sidebaruser-check",children:s.userInfo=="false"?"Ocultar":"Mostrar"})]}),e.jsx("h6",{className:"fw-medium font-14 mt-4 mb-2 pb-1",children:"Color de la barra superior"}),e.jsxs("div",{className:"form-check form-switch mb-1",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"topbar-color",value:"dark",id:"darktopbar-check",defaultChecked:s.navbarColor=="dark"}),e.jsx("label",{className:"form-check-label",htmlFor:"darktopbar-check",children:s.navbarColor=="dark"?"Oscuro":"Acorde al cuerpo"})]}),e.jsx("div",{className:"d-grid mt-4",children:e.jsx("button",{className:"btn btn-primary",id:"resetBtn",children:"Restablecer"})})]})})})]})})},q=({status:s,setStatus:a})=>{var k,v;const i=m.useRef(),r=m.useRef(),{color:n,icon:o,text:d}=_[s]??{},[t,x]=m.useState(0),[l,N]=m.useState({});m.useEffect(()=>{if(s=="verifying"){const u=new URLSearchParams({session:h.APP_CORRELATIVE});let f=new EventSource(`${h.WA_URL}/api/session/verify?${u}`);f.onmessage=({data:j,...z})=>{if(j=="ping")return console.log("Realtime active");const{status:E,qr:F,percent:P,info:A}=JSON.parse(j);switch(E){case"qr":a("qr"),$(i.current).empty(),new QRCode(i.current,{text:F,width:200,height:200,colorDark:"#343a40"});break;case"loading_screen":a("loading_screen"),x(P);break;case"authenticated":a("authenticated");break;case"ready":a("ready"),N(A),f.close();break;case"close":a("close"),f.close(),setTimeout(()=>{a("verifying")},5e3);break;default:f.close();break}},f.onerror=j=>{console.log("Realtime closed"),a("close"),f.close(),setTimeout(()=>{a("verifying")},5e3)}}},[s]);const w=async()=>{const{isConfirmed:u}=await R.fire({title:"Estas seguro?",text:"Se cerrara la sesion actual",icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar",cancelButtonText:"Cancelar"});u&&(await fetch(`${h.WA_URL}/api/session/atalaya`,{method:"DELETE"}),p.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacion correcta",body:`Se cerro la sesion de ${(l==null?void 0:l.pushname)||"WhatsApp"}`}),N({}),a("verifying"))},C=async()=>{try{if(!(await fetch(`${h.WA_URL}/api/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:h.APP_CORRELATIVE,to:[r.current.value],content:`Ping!
> Mensaje automatico`})})).ok)throw new Error("No se pudo enviar el ping");p.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacion correcta",body:`Se envio el ping a ${r.current.value}`})}catch(u){p.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:u.message,type:"danger"})}};return e.jsx("div",{id:"whatsapp-modal",className:"modal fade","aria-hidden":"true","data-bs-backdrop":"static",children:e.jsx("div",{className:"modal-dialog modal-sm modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 me-2 mt-2","data-bs-dismiss":"modal","aria-label":"Close"}),e.jsx("i",{className:`${o} h1 text-${n} my-2 d-block`}),e.jsxs("h4",{className:"mt-2",children:[d," ",s=="loading_screen"&&`[${t}%]`]}),e.jsx("div",{ref:i,id:"qr-code",className:`mt-3 text-center ${s=="qr"?"d-block":"d-none"}`}),s=="ready"&&e.jsxs("div",{className:"d-block py-2",children:[e.jsx("b",{children:l==null?void 0:l.pushname}),e.jsx("br",{}),e.jsxs("span",{className:"text-muted",children:[(k=l==null?void 0:l.me)==null?void 0:k.user,"@",(v=l==null?void 0:l.me)==null?void 0:v.server]}),e.jsxs("div",{className:"input-group mt-2",children:[e.jsx("input",{ref:r,type:"text",className:"form-control form-control-sm",placeholder:"Numero receptor"}),e.jsx(b,{content:"Enviar mensaje ping",children:e.jsx("button",{className:"btn btn-sm input-group-text btn-dark waves-effect waves-light",type:"button",onClick:C,children:"Ping"})})]})]}),s=="ready"&&e.jsx("button",{type:"button",className:"btn btn-danger my-2",onClick:w,children:"Cerrar sesion"})]})})})})})};moment.tz.setDefault("UTC");const H=({children:s,title:a,...i})=>{const[r,n]=m.useState("verifying");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"wrapper",children:[e.jsx(T,{...i,title:a,whatsappStatus:r}),e.jsx(S,{...i}),e.jsxs("div",{className:"content-page",children:[e.jsx("div",{className:"content",children:e.jsx("div",{className:"container-fluid",children:s})}),e.jsx(M,{})]})]}),e.jsx(q,{status:r,setStatus:n}),e.jsx(L,{...i}),e.jsx("div",{className:"rightbar-overlay"})]})};export{H as B};
