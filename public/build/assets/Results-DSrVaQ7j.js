var d=Object.defineProperty;var p=(n,s,t)=>s in n?d(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var i=(n,s,t)=>(p(n,typeof s!="symbol"?s+"":s,t),t);import"./AboutHeader-CpM0iYLI.js";import"./index-B80Lgev0.js";import{m as o}from"./main-B2CtU6ez.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";let c=new AbortController;class u{constructor(){i(this,"path",null);i(this,"hasFiles",!1);i(this,"get",async s=>{try{const{status:t,result:e}=await o.Fetch(`/api/${this.path}/${s}`);if(!t)throw new Error((e==null?void 0:e.message)||"Ocurrio un error inesperado");return e.data}catch(t){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:t.message,type:"danger"}),null}});i(this,"paginate",async s=>{c.abort("Nothing"),c=new AbortController;const t=c.signal;return await(await fetch(`/api/${this.path}/paginate`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:JSON.stringify(s),signal:t})).json()});i(this,"save",async(s,t=()=>{})=>{try{let e=!1,r={};if(this.hasFiles){const a=await fetch(`/api/${this.path}`,{method:"POST",headers:{"X-Xsrf-Token":decodeURIComponent(o.Cookies.get("XSRF-TOKEN"))},body:s});e=a.ok,r=JSON.parseable(await a.text())}else{const a=await o.Fetch(`/api/${this.path}`,{method:"POST",body:JSON.stringify(s)});e=a.status,r=a.result}if(!e)throw new Error((r==null?void 0:r.message)||"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/icon.svg",title:"Correcto",body:r.message,type:"success"}),t==null||t(),r}catch(e){return o.Notify.add({icon:"/assets/img/icon.svg",title:"Error",body:e.message,type:"danger"}),null}});i(this,"status",async({id:s,status:t})=>{try{const{status:e,result:r}=await o.Fetch(`/api/${this.path}/status`,{method:"PATCH",body:JSON.stringify({id:s,status:t})});if(!e)throw new Error((r==null?void 0:r.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:r.message,type:"success"}),!0}catch(e){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:e.message,type:"danger"}),!1}});i(this,"boolean",async({id:s,field:t,value:e})=>{try{const{status:r,result:a}=await o.Fetch(`/api/${this.path}/boolean`,{method:"PATCH",body:JSON.stringify({id:s,field:t,value:e})});if(!r)throw new Error((a==null?void 0:a.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:a.message,type:"success"}),!0}catch(r){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:r.message,type:"danger"}),!1}});i(this,"delete",async s=>{try{const{status:t,result:e}=await o.Fetch(`/api/${this.path}/${s}`,{method:"DELETE"});if(!t)throw new Error((e==null?void 0:e.message)??"Ocurrio un error inesperado");return o.Notify.add({icon:"/assets/img/favicon.png",title:"Correcto",body:e.message,type:"success"}),!0}catch(t){return o.Notify.add({icon:"/assets/img/favicon.png",title:"Error",body:t.message,type:"danger"}),!1}})}}export{u as B};
