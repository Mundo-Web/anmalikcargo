var v=Object.defineProperty;var N=(t,o,a)=>o in t?v(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a;var b=(t,o,a)=>(N(t,typeof o!="symbol"?o+"":o,a),a);import{j as e}from"./FileViewer-CpM0iYLI.js";import{r as n}from"./index-B80Lgev0.js";import{B as w}from"./Results-B9dLaNz0.js";import{S as y}from"./sweetalert2.all-Dh0rZL5X.js";import"./ModalAppointment-CN4FIkPQ.js";import{C}from"./chevron-down-CyYB_9vX.js";class E extends w{constructor(){super(...arguments);b(this,"path","messages")}}const R=new E,S=({onPhoneChange:t})=>{const[o,a]=n.useState([]),[r,i]=n.useState(null),[u,m]=n.useState(""),[c,d]=n.useState(!1),f=n.useRef(null);n.useEffect(()=>{(async()=>{try{const h=await(await fetch("/assets/data/countries_phone.json")).json();a(h);const g=h.find(j=>j.iso2==="PE");i(g||h[0])}catch(l){console.error("Error loading countries:",l)}})()},[]),n.useEffect(()=>{const s=l=>{f.current&&!f.current.contains(l.target)&&d(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const p=s=>{const l=s.target.value.replace(/\D/g,"");if(m(l),r){const h=`+${r.phoneCode.replace(/\D/g,"")}${l}`;t(h)}},x=s=>{i(s),d(!1)};return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teléfono*"}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-500",children:[e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("button",{type:"button",className:"flex items-center justify-between px-3 py-2 h-full border-r border-gray-300 bg-gray-50 rounded-l-md w-20",onClick:()=>d(!c),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`fi fi-${r==null?void 0:r.iso2.toLowerCase()} mr-2`}),e.jsx("span",{children:r==null?void 0:r.iso2})]}),e.jsx(C,{className:`h-4 w-4 transition-transform ${c?"rotate-180":""}`})]}),c&&e.jsx("div",{className:"absolute z-10 mt-1 w-64 bg-white shadow-lg rounded-md py-1 max-h-60 overflow-auto border border-gray-200",children:o.map(s=>e.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>x(s),children:[e.jsx("span",{className:`fi fi-${s.iso2.toLowerCase()} mr-3`}),e.jsx("span",{className:"flex-1",children:s.nameES}),e.jsxs("span",{className:"text-gray-500",children:["+",s.phoneCode]})]},s.iso2))})]}),e.jsx("input",{type:"tel",value:u,onChange:p,placeholder:"Ej: 987654321",className:"flex-1 px-4 py-2 focus:outline-none rounded-r-md",pattern:"[0-9]*"})]}),u&&r&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Número completo: +",r.phoneCode," ",u]})]})},z=({})=>{const[t,o]=n.useState({phone:""}),a=n.useRef(),r=n.useRef(),i=n.useRef(),u=n.useRef(),m=n.useRef(),[c,d]=n.useState(!1),f=async p=>{p.preventDefault(),d(!0);const x={name:a.current.value+" "+r.current.value,email:i.current.value,subject:t.phone,description:m.current.value},s=await R.save(x);d(!1),window.location.href="/thanks",s&&(y.fire({icon:"success",title:"Mensaje enviado",text:"Tu mensaje ha sido enviado correctamente. ¡Nos pondremos en contacto contigo pronto!",showConfirmButton:!1,timer:3e3}),a.current.value=null,r.current.value=null,i.current.value=null,u.current.value=null,m.current.value=null,o({phone:""}))};return e.jsxs("form",{className:"flex flex-col gap-y-6",onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium  mb-1",children:"Nombre"}),e.jsx("input",{ref:a,type:"text",id:"nombre",placeholder:"Ingresa tu nombre",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{className:"",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apellido-materno",className:"block text-sm font-medium  mb-1",children:"Apellido"}),e.jsx("input",{ref:r,type:"text",id:"apellido-materno",placeholder:"Ingresa tu apellido",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium  mb-1",children:"E-mail"}),e.jsx("input",{ref:i,type:"email",id:"email",placeholder:"Ingresa tu dirección de correo electrónico",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("div",{children:e.jsx(S,{onPhoneChange:p=>o({...t,phone:p})})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium  mb-1",children:"Escribe un mensaje"}),e.jsx("textarea",{ref:m,id:"mensaje",rows:6,placeholder:"Escríbenos tu pregunta aquí",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"privacidad",type:"checkbox",className:"h-4 w-4 text-azul border-gray-300 rounded focus:ring-azul/50"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"privacidad",className:"",children:"Usted acepta nuestra amigable política de privacidad."})})]}),e.jsxs("button",{disabled:c,type:"submit",className:" mt-5 bg-[#224483] font-semibold w-8/12 lg:w-3/6 text-white py-1 pl-1 pr-3  gap-2 rounded-full flex items-center lg:h-14",children:[e.jsx("div",{className:"bg-[#EFF0F1] w-12 p-2 rounded-full",children:e.jsx("img",{src:"/assets/img/icons/send.png",className:" h-auto"})}),c?e.jsx("p",{children:"Enviando formulario..."}):e.jsx("p",{className:"ml-4",children:"Enviar formulario"})]})]})};export{z as C};
