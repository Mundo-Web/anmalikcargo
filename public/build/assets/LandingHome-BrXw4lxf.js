var _=Object.defineProperty;var F=(c,i,l)=>i in c?_(c,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[i]=l;var j=(c,i,l)=>(F(c,typeof i!="symbol"?i+"":i,l),l);import{j as r}from"./FileViewer-CpM0iYLI.js";import{r as n}from"./index-B80Lgev0.js";import{c as E}from"./ReactAppend-CBRQCQGz.js";import{B as I}from"./Base-_03gNlCL.js";import{C as T}from"./CreateReactScript-BDoEN7ss.js";import{M as H}from"./Modal-Dyq34CHD.js";import{I as C}from"./InputFormGroup-DZ3W53Mr.js";import{S as B}from"./SwitchFormGroup-ChGOZLEW.js";import{I as D}from"./ImageFormGroup-BhK-m0pl.js";import{S as G}from"./sweetalert2.all-Dh0rZL5X.js";import"./DxBox-CdMuSyGE.js";import{T as R}from"./TextareaFormGroup-BKhRBaxf.js";import{V as L}from"./VideoFormGroup-Djxhe91E.js";import{B as M}from"./Results-B9dLaNz0.js";import"./index-DO3Aws4m.js";import"./tippy-react.esm-CHhA99mn.js";/* empty css              */import"./Logout-Cj6nvmS-.js";import"./main-Br9xqDfn.js";import"./___vite-browser-external_commonjs-proxy-C9-083JZ.js";import"./index.esm-DyEDsTD9.js";/* empty css               */class V extends M{constructor(){super(...arguments);j(this,"path","admin/landing_home");j(this,"hasFiles",!0)}}const O=new V,P=({items:c})=>{const i=n.useRef(),[l,N]=n.useState("home"),[k,g]=n.useState(!1),p=n.useRef(),f=n.useRef(),h=n.useRef(),a=n.useRef(),m=n.useRef(),v=n.useRef(),d=n.useRef(),[b,x]=n.useState(!1),y=c.reduce((e,s)=>{const o=s.correlative.split("_")[1];return e[o]||(e[o]=[]),e[o].push(s),e},{}),u={home:"Inicio",services:"Servicios",aboutus:"Nosotros",facility:"Sedes",contact:"Contacto",blog:"Blog"},S=e=>{e!=null&&e.id?g(!0):g(!1),p.current.value=(e==null?void 0:e.id)??"",f.current.value=(e==null?void 0:e.title)??"",h.current.value=(e==null?void 0:e.description)??"",v.current.value=(e==null?void 0:e.link)??"",e!=null&&e.is_video?($(d.current).prop("checked",!1).trigger("click"),setTimeout(()=>{m.current&&(e!=null&&e.video)&&m.current.setVideoSrc(`/api/landing_home/video/${e.video}`)},100),x(!0)):($(d.current).prop("checked",!0).trigger("click"),a.current&&(e!=null&&e.image)&&(a.image.src=`/api/landing_home/media/${e==null?void 0:e.image}`),a.current.value=null,x(!1)),$(i.current).modal("show")},w=async e=>{e.preventDefault();try{const s={id:p.current.value||void 0,title:f.current.value,description:h.current.value,link:v.current.value,is_video:d.current.checked?1:0},o=new FormData;for(const t in s)o.append(t,s[t]);if(b){if(m.current){const t=m.current.getFile();t&&o.append("video",t)}}else{const t=a.current.files[0];t&&o.append("image",t),o.append("video",null)}if(!await O.save(o))return;window.location.reload()}catch(s){console.error("Error al enviar el formulario:",s),G.fire({icon:"error",title:"Error",text:"Hubo un error al enviar el formulario. Por favor, inténtalo de nuevo."})}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("ul",{className:"nav nav-tabs card-header-tabs",children:Object.keys(u).map(e=>r.jsx("li",{className:"nav-item",children:r.jsx("button",{className:`nav-link ${l===e?"active":""}`,onClick:()=>N(e),children:u[e]})},e))})}),r.jsx("div",{className:"card-body",children:Object.keys(u).map(e=>r.jsxs("div",{style:{display:l===e?"block":"none"},children:[r.jsx("div",{className:"d-flex justify-content-between mb-3",children:r.jsxs("h4",{children:["Secciones de ",u[e]]})}),r.jsx("div",{className:"row",children:(y[e]||[]).map(s=>r.jsx("div",{className:"col-md-6 mb-4",children:r.jsxs("div",{className:"card h-100",children:[r.jsx("div",{className:"card-header d-flex justify-content-between align-items-center",children:r.jsx("h5",{className:"mb-0",children:s.correlative.split("_")[2]})}),r.jsxs("div",{className:"card-body",children:[s.is_video==="1"?r.jsx("video",{src:`/api/landing_home/video/${s.video}`,autoPlay:!0,muted:!0,loop:!0,className:"img-fluid mb-3",style:{maxHeight:"200px",width:"100%",objectFit:"cover"},onError:o=>o.target.src="/api/cover/thumbnail/null"}):s.image?r.jsx("img",{src:`/api/landing_home/media/${s.image}`,className:"img-fluid mb-3",style:{maxHeight:"200px",width:"100%",objectFit:"cover"},onError:o=>o.target.src="/api/cover/thumbnail/null"}):null,s.title&&r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{children:"Título:"}),r.jsx("div",{dangerouslySetInnerHTML:{__html:s.title.replace(/\*(.*?)\*/g,"<strong>$1</strong>")}})]}),s.description&&r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{children:"Descripción:"}),r.jsx("p",{children:s.description})]}),s.link&&r.jsxs("div",{className:"mb-2",children:[r.jsx("strong",{children:"Enlace:"}),r.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",children:s.link})]})]}),r.jsx("div",{className:"card-footer d-flex justify-content-end",children:r.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>S(s),children:[r.jsx("i",{className:"fa fa-edit"})," ","Editar"]})})]})},s.id))})]},e))})]}),r.jsx(H,{modalRef:i,title:k?"Editar sección":"Agregar sección",onSubmit:w,size:"lg",children:r.jsxs("div",{className:"row",id:"principal-container",children:[r.jsx("input",{ref:p,type:"hidden"}),r.jsxs("div",{className:"col-md-6",children:[r.jsx(R,{eRef:f,label:"Título",rows:1,placeholder:"Puedes usar *asteriscos* para resaltar texto"}),r.jsx(R,{eRef:h,label:"Descripción",rows:3}),r.jsx(C,{eRef:v,label:"Link",placeholder:"https://ejemplo.com"}),r.jsx(B,{eRef:d,onChange:e=>x(e.target.checked),label:"Usar video en lugar de imagen",specification:"Solo se mostrará el video en la sección"})]}),r.jsx("div",{className:"col-md-6",children:b?r.jsx(L,{eRef:m,label:"Selecciona un video",col:"col-12"}):r.jsx(D,{eRef:a,label:"Imagen",col:"col-12",aspect:16/9,fit:"contain"})})]})})]})};T((c,i)=>{E(c).render(r.jsx(I,{...i,title:"Landing Inicio",children:r.jsx(P,{...i})}))});
